#!/bin/python

import time
import subprocess
import platform

def ping_sweep(network):
    # Define the range of IP addresses to scan
    ip_range = network.split('.')
    base_ip = '.'.join(ip_range[:-1]) + '.'

    # Check the platform to determine the appropriate ping command
    if platform.system().lower() == "windows":
        ping_cmd = "ping -n 1 -w 1"
    else:
        ping_cmd = "ping -c 1 -W 1"

    # Perform the Ping Sweep
    for i in range(1, 255):
        ip_address = base_ip + str(i)
        response = subprocess.call(f"{ping_cmd} {ip_address}", shell=True, stdout=subprocess.PIPE, stderr=subprocess.PIPE)

        if response == 0:
            print(f"{ip_address}")


# Example: Perform a Ping Sweep on the 192.168.1.0 network

network = input('USAGE: ping-sweep.py {network} \nPlease provide your network to be scanned: ')

#calculating time taken for the program to run
begin = time.time()
ping_sweep(network)
end = time.time()
print(f"Total runtime of the program is {end - begin} Seconds")
